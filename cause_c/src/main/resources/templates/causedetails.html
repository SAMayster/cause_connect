
<!--<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${cause.name}">Cause Name</title>
</head>
<body>
    <h1 th:text="${cause.name}">Cause Name</h1>
    <p th:text="${cause.description}">Cause Description</p>

    <!-- Always display the donation form 
    <form action="#" method="post" th:action="@{/cause/' + ${cause.name} + '/donation/' + ${session.user != null ? session.user.uid : ''}}">
        <input type="hidden" name="causeId" th:value="${cause.cid}" />
        <input type="number" name="amount" min="1" required />
        <button type="submit">Donate</button>
    </form>

    <!-- Display login message if user is not logged in 
    <div th:if="${session.user == null}">
        <p>Please <a href="/login">log in</a> to make a donation.</p>
    </div>
</body>
</html>
-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${cause.name}">Cause Name</title>
</head>
<body>
    <h1 th:text="${cause.name}">Cause Name</h1>
    <p th:text="${cause.description}">Cause Description</p>

    <form id="donationForm" method="post" th:action="@{'/donate'}">
        <input type="hidden" name="causeId" th:value="${cause.cid}" />
        <input type="number" name="amount" min="1" required />
        <button type="submit">Donate</button>
    </form>

    <script>
        document.getElementById('donationForm').addEventListener('submit', function(event) {
  fetch('/donate', {  // Add an object here to specify request options
    method: 'POST'   // Set the method to POST
  })
  .then(response => response.json())
  .then(data => {
    if (!data.loggedIn) {
      alert('Please log in to make a donation.');
      event.preventDefault();
      window.location.href = "/login";
    }
  });
});
    </script>
</body>
</html>






 <!-- Always display the donation form 
    <form id="donationForm" method="post" th:action="@{'/cause/' + ${cause.name} + '/donate/' + ${session.user != null ? session.user.uid : ''}}">
        <input type="hidden" name="causeId" th:value="${cause.cid}" />
        <input type="number" name="amount" min="1" required />
        <button type="submit">Donate</button>
    </form>
-->
<!-- Always display the donation form -->

